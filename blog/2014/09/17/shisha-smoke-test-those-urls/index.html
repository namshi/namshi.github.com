<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=0">
    <title>Shisha, smoke test those URLs! &mdash; Namshi Engineering</title>
    <!-- <link href="https://fonts.googleapis.com/css?family=Droid+Sans:400,700" rel="stylesheet" type="text/css"> -->

    <link rel="stylesheet" type="text/css" href="/stylesheets/prism.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/main.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="/images/namshi-logo.png"/>
    <link href="/atom.xml" rel="alternate" type="application/rss+xml" title="Namshi Engineering" />
    <meta name="title" content="Shisha, smoke test those URLs! ">
    <link rel="canonical" href="http://namshi.github.io/blog/2014/09/17/shisha-smoke-test-those-urls/">
    
    
    <meta property="og:title" content="Shisha, smoke test those URLs! "/>
    <meta property="og:url" content="http://namshi.github.io/blog/2014/09/17/shisha-smoke-test-those-urls/"/>
    
    
    <meta property="og:site_name" content="Namshi Engineering">
</head>
<body>

<section class="site-nav">
    <header>
        <a class="brand" href="/">
          <img src="/images/namshi-logo.png" alt="Inc">
        </a>
        <a href="#" class="burger-icon"></a>
        <nav id="navigation">
            <a href="/" class="home">Blog</a>
            <a href="/team">Team</a>
            <a href="https://github.com/namshi">Github</a>
            <a href="/archives">Archives</a>
            <a class="join-us-link" href="/join-us/">HACK WITH US</a>
        </nav>
        <nav class="tagline">
            <!--<span>HACK WITH US</span>-->
            <a href="/join-us/" class="btn btn-outline">HACK WITH US</a>
        </nav>
    </header>
</section>


<article>

    <div class="container">
        <header>
            <div class="meta">
                <time pubdate datetime="2014-17-September" title="September 17, 2014">September 17, 2014</time>
            </div>
            <h1 class="title">Shisha, smoke test those URLs!</h1>
            
        </header>
        <footer>
            <address>
               
                <p>Written by <strong><a rel="author" href="/team/#Mohamad Hallal" title="Mohamad Hallal">
                
                    Mohamad Hallal
                
                </a></strong><br>
                <span class="muted"></span>
                </p>
            </address>

        </footer>
        <section>
            <p>Here comes Shisha! Yet another NodeJs based application from Namshi! Shisha is a smoke testing module,
what is smoke testing? Read about it <a href="http://en.wikipedia.org/wiki/Smoke_testing_(software)">here</a>.
In short, smoke testing is a term coming from Electrical Engineering, where an Electronic chip is simply tested by
plugging it into an electric source and observing if smoke comes out! How does shisha relate to this? Well,
just give shisha a list or a file of URLs and expected HTTP status code for each URL, and it will assert the expected
status codes and show you back a report! It serves as a quick and fast testing platform for your website/APIs.
Instead of waiting for a unit or an integration test to be prepared and run, simply set shisha to run on your URLs,
it is fast and simple!</p>

<!-- more -->


<h1>Install it</h1>

<p>Install shisha globally from <a href="https://www.npmjs.org/package/shisha">NPM</a></p>

<figure class='code'><figcaption><span></span></figcaption><pre><code class='language-sh'>npm install -g shisha</code></pre></figure>


<h1>Prepare it and smoke it</h1>

<p>Create a text file named <code>.smoke</code> where all your test cases will reside.</p>

<p>Fill it as following:</p>

<figure class='code'><figcaption><span></span></figcaption><pre><code class='language-sh'>http://example.org 200
http://example.org/not-there 404</code></pre></figure>


<p>From the directory where your <code>.smoke</code> file is, run <code>shisha</code> and observe the shisha smoking!</p>

<p>Here is a video illustration:</p>

<p><video width='640' height='640' preload='none' controls poster=''><source src='http://tech.namshi.io/videos/example.mp4' type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'></video></p>

<h1>Features</h1>

<p>You can:&ndash;</p>

<ul>
<li>Pass a path to any text file containing the right URL status code mapping using <code>--smoke</code> argument</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><pre><code class='language-sh'>shisha --smoke /path/to/text/file</code></pre></figure>


<ul>
<li>Pass locals to be replaced in your text file</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><pre><code class='language-sh'>shisha --domain example.org --protocol http</code></pre></figure>


<p>so your text file would look something like this</p>

<figure class='code'><figcaption><span></span></figcaption><pre><code class='language-sh'>{{ protocol }}://{{ domain }}/path 200</code></pre></figure>


<p>Here is how locals work:</p>

<p><video width='640' height='640' preload='none' controls poster=''><source src='http://tech.namshi.io/videos/locals.mp4' type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'></video></p>

<ul>
<li>Easily extend shisha in your code as follows:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><pre><code class='language-sh'>npm install --save shisha</code></pre></figure>


<p>then, in your code:</p>

<figure class='code'><figcaption><span></span></figcaption><pre><code class='language-javascript'>var shisha = require(&apos;shisha&apos;);</code></pre></figure>


<p>you will have access to the <code>smoke</code> method which accepts the following arguments:</p>

<ol>
<li>data source, which can be a path to a text file, a list or an object.</li>
<li>A list of locals to be replaced in the placeholders of the text file.</li>
<li>A callback which accepts the report argument where the set of smoking results are parsed.</li>
</ol>


<figure class='code'><figcaption><span></span></figcaption><pre><code class='language-javascript'> shisha.smoke(&apos;/path/to/a/text/file&apos;, options, callback);</code></pre></figure>


<p>or</p>

<figure class='code'><figcaption><span></span></figcaption><pre><code class='language-javascript'>shisha.smoke(
    [
        {
             url: &apos;http://example.org&apos;,
             status: 200
         },
         ...,
         ...
    ], locals, callback
);</code></pre></figure>


<p>or</p>

<figure class='code'><figcaption><span></span></figcaption><pre><code class='language-javascript'>shisha.smoke(
    {
        &apos;http://example.org&apos;: 200,
        &apos;http://example2.org&apos;: 404,
        ...,
        ...
    }, locals, callback
);</code></pre></figure>


<p><code>locals</code> as mentioned before, is a list of placeholders to be replaced in the smoke file</p>

<figure class='code'><figcaption><span></span></figcaption><pre><code class='language-javascript'>shisha.smoke(urls, {protocol: &apos;https&apos;, domain: &apos;namshi.com&apos;}</code></pre></figure>


<p><code>callback</code> is a function called when smoking is done!</p>

<p>if you do not have any locals, you can simply omit it.</p>

<figure class='code'><figcaption><span></span></figcaption><pre><code class='language-javascript'>shisha.smoke(urls, callback);</code></pre></figure>


<p>Happy smoking!</p>

            
            <footer>
                <span class="categories">Posted in <a class='category' href='/blog/categories/nodejs/'>nodejs</a>, <a class='category' href='/blog/categories/npm/'>npm,</a>, <a class='category' href='/blog/categories/smoke-testing/'>smoke-testing,</a></span>
            </footer>
            
            <!-- Go to www.addthis.com/dashboard to customize your tools -->
<div class="addthis_inline_share_toolbox"></div>
        </section>

        
        <section>
            <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'namshitechblog'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
        </section>
        
    </div>
</article>


<footer class="site-footer">
    <div class="container">
        &copy; 2020 <a href="https://tech.namshi.io">Namshi</a> &middot;
        
        <nav>
            <a href="/">Blog</a> &middot;
            <a href="/team">Team</a> &middot; 
            <a href="https://github.com/namshi">Github</a> &middot; 
            <a href="/join-us/">Careers</a> 
        </nav>

        <nav class="social">
            
            <a href="https://twitter.com/technamshi" title="Follow on Twitter" target="_blank"><i class="icon icon-twitter black"></i></a>
            
            
            <a href="http://facebook.com/NamshiFans" title="Follow on Facebook" target="_blank"><i class="icon icon-facebook black"></i></a>
            
            <a href="/atom.xml" title="RSS Feed">
                <i class="icon icon-rss black"></i>
            </a>
        </nav>
    </div>
</footer>

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="/javascripts/main.js"></script>
<script type="text/javascript" src="/javascripts/prism.js"></script>
<!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-57bdfe0617e09a06"></script>

  <!--google analytics tracking code here-->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-27338864-10', 'auto');
    ga('send', 'pageview');
  </script>




</body>
</html>
