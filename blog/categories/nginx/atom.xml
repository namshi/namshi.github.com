<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: nginx | Tech @ Namshi.com]]></title>
  <link href="http://namshi.github.io/blog/categories/nginx/atom.xml" rel="self"/>
  <link href="http://namshi.github.io/"/>
  <updated>2019-09-09T11:22:24+00:00</updated>
  <id>http://namshi.github.io/</id>
  <author>
    <name><![CDATA[Namshi]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Improve Website Page Load Performance With Critical CSS]]></title>
    <link href="http://namshi.github.io/blog/2015/04/08/improve-website-page-load-performance-with-critical-css/"/>
    <updated>2015-04-08T16:41:00+00:00</updated>
    <id>http://namshi.github.io/blog/2015/04/08/improve-website-page-load-performance-with-critical-css</id>
    <content type="html"><![CDATA[<p><img src="/images/critical-css.png" alt="Critical Css" /></p>

<p>Website performance is the hot topic these days. In fact, performance is becoming a critical factor for websites. First, users really love fast loading websites. Second, performance affects the SEO page ranking. According to Google, page load speed is one of the key parameters of their ranking algorithm. Thus, it is critical for websites to improve page speed performance &ndash; not just for improving users experience, but also for winning against their competitors in Google search results.</p>

<p>For E-commerce websites, this is super critical. If you&rsquo;re not clear, see the results from Amazon after improving their website page performance:</p>

<blockquote><p>For every 1 second of improvement they experienced up to a 2% increase in conversions. For every 100 ms of improvement, they grew incremental revenue by up to 1%</p></blockquote>

<h2>Improving page load time</h2>

<p>Browsers spend most of the time downloading resources. If the resources ( JS, CSS ) are inside the <code>HEAD</code> tag, the browser has to download all of them before parsing the HTML. Therefore, users won&rsquo;t be able to see anything on the screen till all the resources are downloaded.</p>

<!--more-->


<p>We can solve the HTML parsing problem by moving these resources to the bottom of the page; Just above the ending <code>BODY</code> tag. We can also apply the JavaScript lazy loading technique, to load the resources after the DOM is completely parsed and interactive. However, if we move any stylesheets from the <code>HEAD</code> tag ( or lazyload stylesheets ), it will lead to a terrible user experience problem called <strong>FOUC</strong>.</p>

<h2>FOUC  ( Flash of Unstyled Content )</h2>

<p><strong>FOUC</strong> is the abbreviation of &ndash; Flash of Unstyled Content.  A <strong>FOUC</strong> can occur when the browser parses the DOM before applying the stylesheet. A user, at this point, will see completely un-styled content till the stylesheet is downloaded and applied. This is the why including stylesheets in the <code>HEAD</code> tag is considered to be a best practice. Because, if the resources are in the <code>HEAD</code>, the browser has to download and apply all of them before parsing the DOM.</p>

<p>Including the stylesheets in the <code>HEAD</code> is a best practice for good user experience. But, it has an effect on the page load performance in a negative manner. Since the browser has to download all the resources in the <code>HEAD</code> tag before any parsing, the page load time increases. This particular problem has existed for years without any solution, but now, we have something known as <strong>Critical CSS</strong> to fix it.</p>

<h2>Critical CSS</h2>

<p>Before moving on to Critical CSS, we need to understand what <strong>Above the fold content</strong> means. It plays an important role in Critical CSS. <strong>Above the fold content</strong> is the first HTML content ( markup ) a user sees in the browser without scrolling. This markup varies between devices, hence, <strong>Above the fold content</strong> completely depends on the device&rsquo;s ( or browser&rsquo;s ) height and width.</p>

<p>Critical CSS is the minimum css required for displaying &ldquo;<strong>Above the fold content</strong>&rdquo; with out causing any <strong>FOUC</strong> for the users. Critical CSS is also calculated page by page as the <strong>Above the fold content</strong> for different pages will not be the same. Once the Critical CSS is generated for any page ( We&rsquo;ll discuss how to do it in the next section ), it will be embedded in the <code>HEAD</code> tag as inline styles; then, the original CSS files will be lazy loaded. This will have good impact on performance, as there is no need to wait for the CSS files to get downloaded before DOM parsing, hence, no <strong>FOUC</strong>.</p>

<h2>Generating Critical CSS</h2>

<p>We cannot generate the Critical CSS required for each page manually. There are lot of tools available for generating the Critical CSS ( some of them are limited to NodeJS applications ). Here in this section, we will see how to use these tools to generate Critical CSS for our applications/websites.</p>

<h4>NodeJS tools:</h4>

<p>There are different npm modules available. Choose any of them based on your convenience.</p>

<ol>
<li><a href="https://www.npmjs.com/package/critical">Critical</a> ( From Addy Osmani )</li>
<li><a href="https://www.npmjs.com/package/penthouse">Penthouse</a></li>
<li><a href="https://github.com/filamentgroup/criticalCSS">CriticalCSS</a> ( From Filament group )</li>
<li><a href="https://www.npmjs.com/package/critical-css">Critical-CSS</a></li>
</ol>


<p>All we need to do is specify the proper height and width &ndash; as the tools need to calculate the ideal &ldquo;<strong>Above the fold content</strong>&rdquo; size.  It is better to check your analytics dashboard and come up with an above the fold size ( height and width ) that can cover most of your website traffic.</p>

<p>These tools are great for creating Critical CSS. However, they won&rsquo;t be good for creating Critical CSS on the fly. To generate Critical CSS in run time, there are some server modules available for Apache and Nginx. Let&rsquo;s check them out now.</p>

<h4>Apache and Nginx modules</h4>

<p>Google has released their pagespeed modules for both Apache and Nginx. See the links below:</p>

<ol>
<li><a href="http://modpagespeed.com/">Pagespeed module Apache</a></li>
<li><a href="http://ngxpagespeed.com/">Pagespeed module Nginx</a></li>
</ol>


<p>A pagespeed module is a set of filters written in C++, and critical-css is one of them. These filters dynamically transform the response from the server based on the configurations. More on nginx pagespeed critical css filters here:</p>

<p><a href="https://developers.google.com/speed/pagespeed/module/filter-prioritize-critical-css">Prioritze Critical CSS Nginx</a></p>

<p>It should be fairly easy to configure the pagespeed module. However, if you are using a CDN for serving your assets, you might need to add these filters in your configuration:</p>

<p><code>sh
pagespeed InlineResourcesWithoutExplicitAuthorization
pagespeed MapProxyDomain
</code></p>

<p>If you use Docker and node.js, we have something for you. Here in Namshi, we open-sourced a docker container running nginx with pagespeed module. Check out this link and read the documentation:</p>

<p><a href="https://github.com/namshi/docker-node-nginx-pagespeed">Docker Node Nginx Pagespeed</a></p>

<h2>Summary</h2>

<p>Fast loading websites lead to a good user experience and better SEO ranking. Critical CSS is a technique used for effectively loading stylesheets without affecting the user experience. Using Critical CSS will boost page load performance drastically. Here in this article, we discussed how Critical CSS solves the classic <strong>FOUC</strong> problem and improves page speed, the different tools used for generating Critical CSS, and how we open-sourced a docker container running nginx with pagespeed module.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Newsletter #80]]></title>
    <link href="http://namshi.github.io/blog/2015/03/05/newsletter-number-80/"/>
    <updated>2015-03-05T07:11:00+00:00</updated>
    <id>http://namshi.github.io/blog/2015/03/05/newsletter-number-80</id>
    <content type="html"><![CDATA[<blockquote><p>Howdy people, it&rsquo;s <strong>#TechThursday</strong> at <a href="http://twitter.com/techNamshi">#namshi</a>, again! Hope you missed us ;)</p>

<p>First things first:</p>

<p><strong> We&rsquo;re helping to kick start a new cross-tech community here in Dubai: </strong></p>

<p>DUBYTES, this is the name, met yesterday for the 1st time and <a href="https://twitter.com/whelton">James Whelton</a> gave an interesting quick introduction to <a href="http://facebook.github.io/react/">React</a>.
We&rsquo;ll meet every 1st Wednesday of the month, and if you love technology as much as we do: drop by and join us for a nice discussion.
Feel free to ping us on twitter to know the next venue: speech proposals are welcome too!
More news to come on this!</p>

<p><img class="center" src="/images/posts/dubytes-1st-meeting.jpg"></p></blockquote>

<p><strong>And here is the traditional &ldquo;selecta&rdquo; of links our team found interesting this week around the interwebs, enjoy:</strong></p>

<ul>
<li><p><a href="http://www.2ality.com/2015/02/using-es6-today-minsk.html">A 90 minute overview of ECMAScript 6</a></p></li>
<li><p><a href="http://builtwith.com/">Find out what websites are Built With</a></p></li>
<li><p><a href="http://bit.ly/1M4mh70">Loupe is a little visualisation to help you understand how JavaScript&rsquo;s call stack/event loop/callback queue</a></p></li>
<li><p><a href="http://svinfusion.com/blog/sv-in-fusion-hosts-smart-government-open-data-in-san-francisco/">open data in SF municipality with APIs</a></p></li>
</ul>


<!-- more -->


<ul>
<li><p><a href="http://verraes.net/2015/02/form-command-model-validation/">Form, Command, and Model Validation</a></p></li>
<li><p><a href="http://www.whitewashing.de/2015/02/14/phpunit_before_annotations_and_traits_for_code_reuse.html">PHPunit @before Annotations and traits for code-reuse</a></p></li>
<li><p><a href="http://www.whitewashing.de/2015/02/10/a_case_for_weak_type_hints_only_in_php7.html">A case for weak type hints only inPHP7</a></p></li>
<li><p><a href="http://www.whitewashing.de/2015/02/19/vagrant_nfs_and_npm.html">Vagrant, NFS and NPM</a></p></li>
<li><p><a href="https://github.com/iojs/io.js/blob/v1.x/CHANGELOG.md">io.js starts ARM support! check out the changelog: </a></p></li>
<li><p><a href="http://blog.thecodewhisperer.com/2015/02/15/you-have-to-know-when-to-stop/">You Have to Know When to Stop</a></p></li>
<li><p><a href="http://litt.no/tech%20stuff/javascript_module_performance">Javascript: Module or module</a></p></li>
<li><p><a href="http://www.forbes.com/sites/quora/2014/07/14/what-is-the-most-valuable-programming-language-to-know-for-the-future-and-why/3/">Forbers &ndash; What Is The Most Valuable Programming Language To Know For The Future And Why?</a></p></li>
<li><p><a href="https://github.com/emberjs/ember.js/pull/10501">Emberjs &ndash; Glimmer Engine</a></p></li>
<li><p><a href="http://buff.ly/1GkQkXu">Infrastructure as Code with Terraform</a></p></li>
<li><p><a href="http://buff.ly/1vZzvh7">Google is bringing Chrome Remote Desktop to Chromebooks next</a></p></li>
<li><p><a href="http://buff.ly/1DD0I6R">Inspect Elements On Androidâ€™s Internet Browser</a></p></li>
<li><p><a href="http://buff.ly/1NbK2vg">What are the most interesting HTML/JS/DOM/CSS hacks that most web developers don&rsquo;t know about?</a></p></li>
<li><p><a href="http://buff.ly/1EbYbWH">Wiki creator reinvents collaboration, again</a></p></li>
<li><p><a href="http://buff.ly/1M2Eu2S">Ultra-simple wrapper around XMLHttpRequest</a></p></li>
<li><p><a href="http://buff.ly/1vTUzWm">Why did Netflix use #NGINX and FreeBSD to build their own CDN?</a></p></li>
<li><p><a href="http://buff.ly/1E4cU5U">The 5 Pillars of a Solid Front-End</a></p></li>
<li><p><a href="http://www.bbc.co.uk/blogs/internet/entries/47a96d23-ae04-444e-808f-678e6809765d">How we built the new BCC homepage</a></p></li>
<li><p><a href="http://antirez.com/news/86?utm_source=hackernewsletter">Side projects&hellip; Redis is now 6 years old</a></p></li>
<li><p><a href="https://highlightjs.org/">highlight.js: syntax highlighting for the Web</a></p></li>
<li><p><a href="http://bit.ly/18SdOWj">Guiding Object-Oriented Design with Tests</a></p></li>
<li><p><a href="http://bit.ly/1EP2pTg">Effective Doctrine2: Performance Tips for Symfony2 Developers</a></p></li>
<li><p><a href="http://bit.ly/1zZvndx">React JS Tutorial and Guide to the Gotchas</a></p></li>
<li><p><a href="http://docs.vagrantup.com/v2/provisioning/docker.html">Docker Provisioner</a></p></li>
<li><p><a href="http://blog.docker.com/2015/03/socketplane-excited-to-be-joining-docker-to-collaborate-with-networking-ecosystem/">Socketplane excited to be jining docker to collaborate with networking ecosystem</a></p></li>
<li><p><a href="http://aadrake.com/command-line-tools-can-be-235x-faster-than-your-hadoop-cluster.htm">Command-line tools can be 235x faster than your Hadoop cluster</a></p></li>
<li><p><a href="https://speakerdeck.com/elasticsearch/query-optimization-go-more-faster-better">Elasticsearch query optimization</a></p></li>
<li><p><a href="http://blog.qbox.io/quick-and-dirty-autocomplete-with-elasticsearch-completion-suggest">Quick and Dirty Autocomplete with Elasticsearch Completion Suggest</a></p></li>
<li><p><a href="https://gist.github.com/wincent/598fa75e22bdfa44cf47">Unofficial Relay FAQ</a></p></li>
<li><p><a href="https://www.youtube.com/watch?v=kC0JYp79tdo">Elementor, an improved element explorer for protractor</a></p></li>
<li><p><a href="http://ryanclark.me/getting-started-with-flux/">Introduction to Facebook&rsquo;s Flux architecture</a></p></li>
<li><p><a href="https://www.youtube.com/watch?v=uD6Okha_Yj0">An Angular2 Todo App: First look at App Development in Angular2</a></p></li>
<li><p><a href="http://smartdatacollective.com/lbedgood/302486/how-data-service-daas-revolutionizing-marketing">How Data Service DAAS Revolutionizing Marketing</a></p></li>
<li><p><a href="https://realpython.com/blog/python/api-integration-in-python/">API integration in Python</a></p></li>
<li><p><a href="http://techcrunch.com/2015/03/02/paypal-paydiant/">paypal acquires paydiant</a></p></li>
<li><p><a href="http://datascience.sqlpass.org/">SQL pass conference with data science</a></p></li>
</ul>


<blockquote><p>Aaaand that&rsquo;s all folks, see you next week! :)</p></blockquote>
]]></content>
  </entry>
  
</feed>
