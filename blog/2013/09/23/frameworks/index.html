<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=0">
    <title>Frameworks And Tests in Namshi &mdash; Namshi Engineering</title>
    <!-- <link href="https://fonts.googleapis.com/css?family=Droid+Sans:400,700" rel="stylesheet" type="text/css"> -->

    <link rel="stylesheet" type="text/css" href="/stylesheets/prism.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/main.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="/images/namshi-logo.png"/>
    <link href="/atom.xml" rel="alternate" type="application/rss+xml" title="Namshi Engineering" />
    <meta name="title" content="Frameworks And Tests in Namshi ">
    <link rel="canonical" href="http://namshi.github.io/blog/2013/09/23/frameworks/">
    
    
    <meta property="og:title" content="Frameworks And Tests in Namshi "/>
    <meta property="og:url" content="http://namshi.github.io/blog/2013/09/23/frameworks/"/>
    
    
    <meta property="og:site_name" content="Namshi Engineering">
</head>
<body>

<section class="site-nav">
    <header>
        <a class="brand" href="/">
          <img src="/images/namshi-logo.png" alt="Inc">
        </a>
        <a href="#" class="burger-icon"></a>
        <nav id="navigation">
            <a href="/" class="home">Blog</a>
            <a href="/team">Team</a>
            <a href="https://github.com/namshi">Github</a>
            <a href="/archives">Archives</a>
            <a class="join-us-link" href="/join-us/">HACK WITH US</a>
        </nav>
        <nav class="tagline">
            <!--<span>HACK WITH US</span>-->
            <a href="/join-us/" class="btn btn-outline">HACK WITH US</a>
        </nav>
    </header>
</section>


<article>

    <div class="container">
        <header>
            <div class="meta">
                <time pubdate datetime="2013-23-September" title="September 23, 2013">September 23, 2013</time>
            </div>
            <h1 class="title">Frameworks And Tests in Namshi</h1>
            
        </header>
        <footer>
            <address>
               
                <div class="author-pic">
                  <img src="/images/ayham.jpg">
                </div>
               
                <p>Written by <strong><a rel="author" href="/team/#Ayham Alzoubi" title="Ayham Alzoubi">
                
                    Ayham Alzoubi
                
                </a></strong><br>
                <span class="muted">Software Engineering Lead</span>
                </p>
            </address>

        </footer>
        <section>
            <p>As Namshi developers we spend our time doing tickets and coding tasks every day to enhance the
website. However these changes are not stable all the time, sometimes some of these new changes
end up breaking other working parts of our applications without a prior alert until after we deploy it on
our website. As a result we end up having some bugs and hot fixes either immediately after testing the
new deployment or later on when people spot the bugs. Therefore Intensive QA is important because the
manual test only is not enough, even though if we were careful sometimes we’ll probably forget to test
all the affected parts by our changes. And after any deployment we need to test everything and if something
was broken we would need to fix is ASAP.</p>

<!-- more -->


<p>We were working with <a href="http://framework.zend.com/">Zend Framework</a> which is considered as a good
framework for MVC projects, but we decided to move to <a href="http://symfony.com/">Symfony2</a> as it is more
user-friendly to enhance the structure of our projects and make it more organized, service based applications
and most importantly to build automated unit tests. Automated tests are mainly important for testing our tickets
and changes before/after they are deployed for quality assurance purposes. Moreover, such tests need to be
integrated at early stages because it’s very hard to add them after the development of your application.
Therefore, such tests need to be implemented in parallel with your application to make sure you cover
all units and aspects of your application.</p>

<h4>Testing our project using phpunit</h4>

<p>Quality assurance is one of the most important aspects in application development, there are several tests
that can be used for web applications like:</p>

<ul>
<li><h5>Unit Test</h5></li>
</ul>


<p>Unit Tests are usually conducted to test classes and functions within the application itself. It tests how
some functions interact with others and if the desired output and behavior are obtained.</p>

<ul>
<li><h5>Functional Test</h5></li>
</ul>


<p>Functional test is mainly used test the integration between our application [Namshi] and other services
and layers.</p>

<p>This test is useful for checking how our application functions and interacts with internal and external services.</p>

<h4>Why do we waste time on implementing automated tests</h4>

<p>If we develop our applications without writing automated tests to save time, we will end up spending more
time in fixing issues after each deployment. therefore adding automated tests will save our time,
ensure the quality of our application and help us gaining the trust of our customers.</p>

<h4>How to implement automated test</h4>

<p>With the help of symfony2 implementing automated tests is much easier and feasible. First of all you will
need to install <a href="http://phpunit.de/manual/current/en/index.html">phpunit</a> and then develop the test and
 implement it in your application.</p>

<h4>Would automated test modify the application&rsquo;s data</h4>

<p>Automated tests should not affect/modify any data in our application. Therefore we create new databases
for the testing environment, then we use data fixtures
<a href="http://symfony.com/doc/current/bundles/DoctrineFixturesBundle/index.html">DoctrineFixturesBundle</a>
to insert dummy data into the testing databases, and finally we add/delete required data before/after each test.</p>

<h4>Testing <a href="http://namshi.com/">Namshi</a></h4>

<p>We are implementing our tests for our application and all the services that interact with it.
 Our purpose is to cover all aspects of <a href="http://namshi.com/">Namshi</a> with automated test (functional test or unit test)
 to ensure the quality of our application and optimize it.</p>

<p>for now we implemented around 200 test cases
<img class="center" src="/images/posts/test-result-success.png" title="test result" ></p>

<p>These tests won&rsquo;t pass if we have any bugs of the application
<img class="center" src="/images/posts/test-result-failure.png" title="test result" ></p>

<h4>How we assert test results?</h4>

<p>we can assert test results in different ways depending on the response that we are expecting:</p>

<figure class='code'><pre><code class='language-bash'>$this-&gt;assertEquals(400, $response-&gt;getStatusCode());
$this-&gt;assertContains(&quot;Expected text&quot;, $crawler-&gt;filter(&apos;*&apos;)-&gt;text());</code></pre></figure>


<p>we can also use <a href="http://php.net/manual/en/class.domxpath.php">DOMXPath</a> to filter html result</p>

<figure class='code'><pre><code class='language-bash'>$xpath  = new DOMXPath($doc);
$this-&gt;assertContains(&apos;expected value&apos;, $xpath-&gt;query(&quot;//td[@class=&apos;html tag class&apos;]&quot;)-&gt;item(0)-&gt;nodeValue);</code></pre></figure>


<p>or we can expect exceptions</p>

<figure class='code'><pre><code class='language-bash'>/**
 * @expectedException \Namshi\EntityBundle\Exception\InvalidPaymentMethod
 */
 public function testServiceWithInvalidPaymentMethod()
 {
    $data   = initial data
    $result = $service-&gt;execute($data);
 }</code></pre></figure>


            
            <footer>
                <span class="categories">Posted in <a class='category' href='/blog/categories/automated-testing/'>Automated Testing</a>, <a class='category' href='/blog/categories/phpunit/'>Phpunit</a></span>
            </footer>
            
            <!-- Go to www.addthis.com/dashboard to customize your tools -->
<div class="addthis_inline_share_toolbox"></div>
        </section>

        
        <section>
            <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'namshitechblog'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
        </section>
        
    </div>
</article>


<footer class="site-footer">
    <div class="container">
        &copy; 2019 <a href="https://tech.namshi.io">Namshi</a> &middot;
        
        <nav>
            <a href="/">Blog</a> &middot;
            <a href="/team">Team</a> &middot; 
            <a href="https://github.com/namshi">Github</a> &middot; 
            <a href="/join-us/">Careers</a> 
        </nav>

        <nav class="social">
            
            <a href="https://twitter.com/technamshi" title="Follow on Twitter" target="_blank"><i class="icon icon-twitter black"></i></a>
            
            
            <a href="http://facebook.com/NamshiFans" title="Follow on Facebook" target="_blank"><i class="icon icon-facebook black"></i></a>
            
            <a href="/atom.xml" title="RSS Feed">
                <i class="icon icon-rss black"></i>
            </a>
        </nav>
    </div>
</footer>

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="/javascripts/main.js"></script>
<script type="text/javascript" src="/javascripts/prism.js"></script>
<!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-57bdfe0617e09a06"></script>

  <!--google analytics tracking code here-->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-27338864-10', 'auto');
    ga('send', 'pageview');
  </script>




</body>
</html>
