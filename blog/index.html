
<!DOCTYPE HTML>

<html>

<head>
	<meta charset="utf-8">
	<title>Namshi</title>
	<meta name="author" content="Namshi">

	
	<meta name="description" content="Mar 13th, 2014 TechThursday, luna, php TechThursday again: it&rsquo;s a bit short, but the list of useful links of the week
is still here! PHP &hellip;">
	

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="Namshi" type="application/atom+xml">
	
	<link rel="canonical" href="http://tech.namshi.com/blog/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
  

</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">
	
	<script src="/javascripts/md5.js"></script>
	<script type="text/javascript">
		$(function(){
			$('.profilepic').append("<img src='/images/namshi.png' alt='Profile Picture' style='width: 160px;' />");
		});
	</script>
	
</div>

<nav id="main-nav"><ul>
	<li><a href="/">Blog</a></li>
	<li><a href="/about">About</a></li>
	<li><a href="/team">Team</a></li>
	<li><a href="/newsletter">Newsletter</a></li>
	<li><a href="/archives">Archive</a></li>
</ul>

</nav>
<nav id="sub-nav">
	<div class="social">
		
		<a class="facebook" href="http://www.facebook.com/NamshiFans" title="Facebook">Facebook</a>
		
		
		
		<a class="twitter" href="http://twitter.com/NamshiDotCom" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/namshi" title="GitHub">GitHub</a>
		
		
		
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>
</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="inner">


    <article class="post">    <div class="meta">
        <div class="date">








  


<time datetime="2014-03-13T16:43:00+04:00" data-updated="true" itemprop="datePublished">Mar 13<span>th</span>, 2014</time></div>
        <div class="tags">


	<a class='category' href='/blog/categories/techthursday/'>TechThursday</a>, <a class='category' href='/blog/categories/luna/'>luna</a>, <a class='category' href='/blog/categories/php/'>php</a>


</div>
        
        <div class="author"><a href="/team/#"></a></div>
    </div>
	<h1 class="title" itemprop="name"></h1>
	<div class="entry-content" itemprop="articleBody"><p>TechThursday again: it&rsquo;s a bit short, but the list of useful links of the week
is still here!</p>

<!-- more -->


<ul>
<li><a href="https://github.com/marcj/php-pm">PHP process manager</a></li>
<li><a href="http://scoutapp.github.io/scout_realtime/"><code>top</code> is 30 years old, use <code>scout</code></a></li>
<li><a href="https://github.com/luna/luna">the Luna programming language</a></li>
<li><a href="https://github.com/sebastianbergmann/money">Money value objects in PHP</a></li>
</ul>

</div></article>


    <article class="post">    <div class="meta">
        <div class="date">








  


<time datetime="2014-03-06T14:05:00+04:00" data-updated="true" itemprop="datePublished">Mar 6<span>th</span>, 2014</time></div>
        <div class="tags">


	<a class='category' href='/blog/categories/namshi/'>Namshi</a>, <a class='category' href='/blog/categories/techthursday/'>TechThursday</a>, <a class='category' href='/blog/categories/newsletter/'>newsletter</a>


</div>
        
        <div class="author"><a href="/team/#"></a></div>
    </div>
	<h1 class="title" itemprop="name"></h1>
	<div class="entry-content" itemprop="articleBody"><p>Welcome back to <a href="/blog/categories/techthursday/">#TechThursday</a>!</p>

<p>Today we present you some interesting news and articles from the world of web technology!</p>

<!-- more -->


<p>*<a href="http://antirez.com/news/71">A simple distributed algorithm for small idempotent information</a></p>

<p>*<a href="https://github.com/toddmotto/stratos">Stratos.js &ndash; Object manipulation module</a></p>

<p>*<a href="http://usablica.github.io/progress.js/">progress.js &ndash; A themeable progress bar library for everything</a></p>

<p>*<a href="http://zachholman.com/posts/only-90s-developers/">Only 90s Web Developers Remember This</a></p>

<p>*<a href="http://hipsterdevstack.tumblr.com/">Hipster Dev Stack</a></p>

<p>*<a href="http://www.theguardian.com/info/developer-blog/2014/feb/18/how-the-guardian-successfully-moved-domain">How the Guardian successfully moved domain to www.theguardian.com</a></p>

<p>*<a href="http://www.newfangled.com/the_way_you_design_web_content_is_about_to_change">The way you design web content is about to change</a></p>

<p>*<a href="http://www.slideshare.net/sharkag/index-management-in-shallow-depth">Index management in shallow depth</a></p>

<p>*<a href="http://www.sitepoint.com/data-fixtures-symfony2/">Data Fixtures in Symfony2</a></p>

<p>*<a href="http://smartbear.com/products/software-development/what-is-code-review/">What IS Code Review?</a></p>

<p>*<a href="http://www.couchbase.com/presentations/couchbase-tlv-2014-couchbase-at-viber">Viber Replaces MongoDB with Couchbase</a></p>

<p>*<a href="https://github.com/orocrm/crm-application">OroCRM Application</a></p>

<p>*<a href="http://www.symfony2cheatsheet.com/">Symfony2cheatsheet</a></p>

<p>*<a href="http://www.codingthearchitecture.com/2014/03/05/five_things_every_developer_should_know_about_software_architecture.html">Five things every developer should know about software architecture</a></p>

<p>*<a href="https://github.com/maxogden/rainbowify">rainbowify</a></p>

<p>*<a href="http://www.slideshare.net/mathiasverraes/unbreakable-domain-models-phpuk-2014-london">Unbreakable Domain Models</a></p>

<p>*<a href="http://www.slideshare.net/bluesmoon/presentations">web performance optimizations</a></p>
</div></article>


    <article class="post">    <div class="meta">
        <div class="date">








  


<time datetime="2014-02-21T12:57:00+04:00" data-updated="true" itemprop="datePublished">Feb 21<span>st</span>, 2014</time></div>
        <div class="tags">


	<a class='category' href='/blog/categories/content/'>Content</a>, <a class='category' href='/blog/categories/expression-language/'>Expression Language</a>, <a class='category' href='/blog/categories/seo/'>SEO</a>, <a class='category' href='/blog/categories/symfony2/'>Symfony2</a>


</div>
        
        <div class="author"><a href="/team/#"></a></div>
    </div>
	<h1 class="title" itemprop="name"></h1>
	<div class="entry-content" itemprop="articleBody"><p>Expression Language is a new awesome component that got released in the latest <a href="http://symfony.com/blog/symfony-2-4-0-released">Symfony2.4</a>. This component allows string expressions
to be parsed, compiled and evaluated in PHP. It was basically extracted from the Twig library that supports writing expression logic in templates.</p>

<p>As simple as:&ndash;</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$expLang = new ExpressionLanguage();
</span><span class='line'>$x       = "1+1";
</span><span class='line'>echo $expressionLang-&gt;evaluate($x);</span></code></pre></td></tr></table></div></figure>


<p>The previous code will output &ldquo;2&rdquo;!</p>

<p>It seems simple enough, but the benefits that it introduces are great! Especially when we talk about a company like Namshi, where there are dedicated and specialized content and marketing teams with
hundreds of templates and segments of information that must be delivered and shown on the website. The goal is to provide the most flexibility to other departments in creating their information
with the least overhead in terms of code maintenance to the development team.</p>

<!-- more -->


<p>Fabien Potencier, the creator of Symfony, points out that one of the advantages of introducing this component will be the ability to overcome the limitation of the &ldquo;static configuration&rdquo;
anywhere in the Symfony2 application such as in services and routing. Imagine that instead of having one route to point to a controller, you can give an expression that sends the request of
the same path to different controllers DYNAMICALLY! More explanation about this is introduced <a href="http://symfony.com/blog/new-in-symfony-2-4-the-expressionlanguage-component#routing">here</a>.</p>

<p>So, let&rsquo;s take a look on this component in some more detail.</p>

<p>The component supports a set of pre-defined operators and functions that can be used to construct complex expressions, we list them and their PHP counterparts:&ndash;</p>

<pre><code>1. binary operators and functions
    - '**' =&gt; 'pow'
    - '..' =&gt; 'range'
    - 'in' =&gt; 'in_array'
    - 'not in' =&gt; '!in_array'
    - '&amp;&amp; || | ^ &amp; == === != !== &lt; &gt; &gt;= &lt;= + = * / %' =&gt; same in php
    - 'A matches B' =&gt; preg_match(A,B)
2. Unary operators
    - '!' =&gt; '!'
    - 'not' =&gt; '!'
    - '+' =&gt; '+'
    - '-' =&gt; '-'
3. Object Attributes
    - 'foo.one' =&gt; 'foo-&gt;one'
4. Arrays
    - '[foo1,foo2]' =&gt; array("foo1", "foo2")
5. Functions
    - 'foo(a,b,c)' =&gt; call_user_func_array(array(foo), array(a, b, c)
6. Names:
    - 'foo' =&gt; $foo
</code></pre>

<p>The killer feature is, as we are going to see next, is the ability to register your own functions (similar to Twig) in the component to be utilized in expressions.</p>

<p>The component provides public access to methods that allows you to create your own implementations of expression functions.</p>

<figure class='code'><figcaption><span>&#8221; </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="cp">&lt;?php</span>
</span><span class='line'><span class="nv">$expLang</span><span class="o">-&gt;</span><span class="na">register</span><span class="p">(</span><span class="s1">&#39;functionNameToBeUseInTheStringExpression&#39;</span><span class="p">,</span> <span class="k">function</span><span class="p">(){</span>
</span><span class='line'>    <span class="c1">//compile callback function</span>
</span><span class='line'><span class="p">},</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">//evaluateCallbackFunction</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>As its name implies, this function registers or adds the required support to call a function within the expression string.
This method has two callback functions, one to be called when the expression is compiled, and the other when its evaluated.</p>

<figure class='code'><figcaption><span>&#8221; </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="cp">&lt;?php</span>
</span><span class='line'><span class="nv">$expLang</span><span class="o">-&gt;</span><span class="na">compile</span><span class="p">(</span><span class="s1">&#39;stringExpression&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>This method, returns the equivalent PHP expression without evaluating it, so you can evaluate it after doing some required manipulation.</p>

<figure class='code'><figcaption><span>&#8221; </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="cp">&lt;?php</span>
</span><span class='line'><span class="k">echo</span><span class="p">(</span><span class="nv">$expLang</span><span class="o">-&gt;</span><span class="na">compile</span><span class="p">(</span><span class="s2">&quot;&#39;test&#39; matches &#39;test2&#39;&quot;</span><span class="p">));</span>
</span><span class='line'><span class="c1">//shows preg_match(&quot;test&quot;, &quot;test2&quot;)</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>&#8221; </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="cp">&lt;?php</span>
</span><span class='line'><span class="nv">$expLang</span><span class="o">-&gt;</span><span class="na">evaluate</span><span class="p">(</span><span class="s1">&#39;stringExpression&#39;</span><span class="p">,</span> <span class="k">array</span> <span class="nv">$values</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>This function both compiles the expression to PHP and evaluates it to return the outcome. The expression is evaluated for both the built in functions and operators and the evaluate callback function
of a registered custom function.
It also allows to send a set of default predefined <code>$values</code> to the evaluation process to be passed to the evaluate callback.</p>

<figure class='code'><figcaption><span>&#8221; </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="cp">&lt;?php</span>
</span><span class='line'><span class="nv">$expLang</span><span class="o">-&gt;</span><span class="na">parse</span><span class="p">(</span><span class="s1">&#39;stringExpression&#39;</span><span class="p">,</span> <span class="k">array</span> <span class="nv">$names</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>This function parses a string expression from a Token Stream to a Node Tree (the component is built using the Abstract Syntax Tree algorithm) so you can have your expression
as a tree of nodes. Not really sure how it can be benefited from (please share your ideas!).</p>

<p>In a simple <code>var_dump()</code> I can show you what this method can return</p>

<figure class='code'><figcaption><span>&#8221; </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="x">var_dump($expLang-&gt;parse(&#39;1 + 2&#39;, array()));</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>object(Symfony\Component\ExpressionLanguage\ParsedExpression)#18 (2) {
</span><span class='line'>  ["nodes":"Symfony\Component\ExpressionLanguage\ParsedExpression":private]=&gt;
</span><span class='line'>  object(Symfony\Component\ExpressionLanguage\Node\BinaryNode)#17 (2) {
</span><span class='line'>    ["nodes"]=&gt;
</span><span class='line'>    array(2) {
</span><span class='line'>      ["left"]=&gt;
</span><span class='line'>      object(Symfony\Component\ExpressionLanguage\Node\ConstantNode)#15 (2) {
</span><span class='line'>        ["nodes"]=&gt;
</span><span class='line'>        array(0) {
</span><span class='line'>        }
</span><span class='line'>        ["attributes"]=&gt;
</span><span class='line'>        array(1) {
</span><span class='line'>          ["value"]=&gt;
</span><span class='line'>          int(1)
</span><span class='line'>        }
</span><span class='line'>      }
</span><span class='line'>      ["right"]=&gt;
</span><span class='line'>      object(Symfony\Component\ExpressionLanguage\Node\ConstantNode)#16 (2) {
</span><span class='line'>        ["nodes"]=&gt;
</span><span class='line'>        array(0) {
</span><span class='line'>        }
</span><span class='line'>        ["attributes"]=&gt;
</span><span class='line'>        array(1) {
</span><span class='line'>          ["value"]=&gt;
</span><span class='line'>          int(2)
</span><span class='line'>        }
</span><span class='line'>      }
</span><span class='line'>    }
</span><span class='line'>    ["attributes"]=&gt;
</span><span class='line'>    array(1) {
</span><span class='line'>      ["operator"]=&gt;
</span><span class='line'>      string(1) "+"
</span><span class='line'>    }
</span><span class='line'>  }
</span><span class='line'>  ["expression":protected]=&gt;
</span><span class='line'>  string(5) "1 + 2"</span></code></pre></td></tr></table></div></figure>


<p>It can perhaps be used to give flexibility for developers to inject and manipulate expressions coming from a non-configurable source.</p>

<p>Here is a comprehensive example of all the previously described methods:</p>

<figure class='code'><figcaption><span>&#8221; </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="x">use Symfony\Component\ExpressionLanguage\ExpressionLanguage;</span>
</span><span class='line'>
</span><span class='line'><span class="x">$expLang = new ExpressionLanguage();</span>
</span><span class='line'><span class="x">$expLang-&gt;register(&#39;plus&#39;, function(), function($args, $a, $b) {</span>
</span><span class='line'><span class="x">    return $a + $b;</span>
</span><span class='line'><span class="x">}</span>
</span><span class='line'>
</span><span class='line'><span class="x">$expression = &#39;plus(1,5)&#39;;</span>
</span><span class='line'><span class="x">echo($expLang-&gt;parse($expression)) . PHP_EOL;</span>
</span><span class='line'><span class="x">echo($expLang-&gt;compile($expression)) . PHP_EOL;</span>
</span><span class='line'><span class="x">echo($expLang-&gt;evaluate($expression)) . PHP_EOL;</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>plus(1,5)
</span><span class='line'>1 + 5
</span><span class='line'>6</span></code></pre></td></tr></table></div></figure>


<p>Since here at <a href="http://namshi.com/">Namshi</a> we are using Symfony2 as the main PHP framework for our Backend and API development efforts. We are up-to-date with latest releases
from Symfony. The Expression Language Component allowed us to introduce more flexibility in the way other departments such as Content and Marketing tailor views and serve data
based on some client related information.</p>

<p>We were able to integrate Twig, YAML and the Expression Language Component using Redis as the mega storage unit.</p>

<p>As an example, we have a set of Twig templates for the SEO guys to store the pages&#8217; meta information stored in a redis hash and indexed by the path info of the request,
and they are json encoded:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>"/shoes/" =&gt;
</span><span class='line'>[["locale(en_AE)", {"header":"Buy shoes from Namshi in UAE right on your ", "pageTitle":"Welcome to Namshi UAE"}],
</span><span class='line'>["locale(en_SA)", {"header": "Buy shoes from Namshi in Saudi right on your , "pageTitle":"Welcome to Namshi Saudi"}]]</span></code></pre></td></tr></table></div></figure>


<p>And in a <code>device</code> redis hash, we have the corresponding possible values for <code>device</code> indexed by the device type</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>"mobile" =&gt;
</span><span class='line'>["device":"Mobile Phone"]</span></code></pre></td></tr></table></div></figure>


<p>Now, we fetch the appropriate template based on the path info and select the first template that its condition evaluates to <code>true</code>, fetch the context (device) based on
client information, render the twig template with the appropriate device value and parse it as YAML!</p>

<p>Was that fast? sorry, here is a sample code:</p>

<figure class='code'><figcaption><span>&#8221; </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="cp">&lt;?php</span>
</span><span class='line'><span class="nv">$redis</span>      <span class="o">=</span> <span class="c1">//the redis instance</span>
</span><span class='line'><span class="nv">$path</span>       <span class="o">=</span> <span class="c1">//get the required path from the request</span>
</span><span class='line'><span class="nv">$device</span>     <span class="o">=</span> <span class="c1">//get the device type from a service or a header</span>
</span><span class='line'><span class="nv">$expLang</span>    <span class="o">=</span> <span class="c1">//the expression language instance</span>
</span><span class='line'><span class="nv">$yamlParser</span> <span class="o">=</span> <span class="c1">//the YAML parser instance</span>
</span><span class='line'><span class="nv">$orgLocale</span>  <span class="o">=</span> <span class="c1">//get the locale value from a service or a header</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$expLang</span><span class="o">-&gt;</span><span class="na">register</span><span class="p">(</span><span class="s1">&#39;locale&#39;</span><span class="p">,</span> <span class="k">function</span><span class="p">(),</span> <span class="k">function</span><span class="p">(</span><span class="nv">$values</span><span class="p">,</span> <span class="nv">$locale</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="nv">$locale</span> <span class="o">==</span> <span class="nv">$orgLocale</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$possibleTemplates</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$redis</span><span class="o">-&gt;</span><span class="na">hget</span><span class="p">(</span><span class="s2">&quot;seo_templates&quot;</span><span class="p">,</span> <span class="nv">$path</span><span class="p">),</span> <span class="k">true</span><span class="p">);</span>
</span><span class='line'><span class="nv">$contextValues</span>     <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$redis</span><span class="o">-&gt;</span><span class="na">hget</span><span class="p">(</span><span class="s2">&quot;seo_device&quot;</span><span class="p">,</span> <span class="nv">$device</span><span class="p">),</span> <span class="k">true</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="k">foreach</span> <span class="p">(</span><span class="nv">$possibleTemplates</span> <span class="k">as</span> <span class="nv">$possibleTemplate</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">list</span><span class="p">(</span><span class="nv">$condition</span><span class="p">,</span> <span class="nv">$template</span><span class="p">)</span> <span class="o">=</span> <span class="nv">$possibleTemplate</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="nv">$expLang</span><span class="o">-&gt;</span><span class="na">evaluate</span><span class="p">(</span><span class="nv">$condition</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>        <span class="nv">$twig</span>             <span class="o">=</span> <span class="k">new</span> <span class="nx">\Twig_environment</span><span class="p">(</span><span class="k">new</span> <span class="nx">Twig_Loader_String</span><span class="p">(</span><span class="nv">$template</span><span class="p">));</span>
</span><span class='line'>        <span class="nv">$renderedTemplate</span> <span class="o">=</span> <span class="nv">$twig</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="nb">json_encode</span><span class="p">(</span><span class="nv">$template</span><span class="p">),</span> <span class="nv">$contextValues</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="nv">$yamlParser</span><span class="o">-&gt;</span><span class="na">parse</span><span class="p">(</span><span class="nv">$renderedTemplate</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//Note: this code requires lots of error checking and try, catch blocks to detect and report errors and exceptions since</span>
</span><span class='line'><span class="c1">// content and SEO information, for example, are considered fragile and sensitive</span>
</span></code></pre></td></tr></table></div></figure>


<p>Nice, easy and simple. This approach for a CMS like system, provides the following benefits:</p>

<ul>
<li>High flexibility in creating information (content, SEO, etc..)</li>
<li>Tailoring data according to client information (mobile, desktop, large/small screens, app, tablet, etc..)</li>
<li>Can be based on numerous variables (path information, headers, domain, device type, etc..)</li>
<li>Content specialization and less dependency on the tech team.</li>
<li>Less code maintenance overhead since the expected future requirements can only be limited to registering Expression Language functions.</li>
</ul>

</div></article>


    <article class="post">    <div class="meta">
        <div class="date">








  


<time datetime="2014-02-20T15:41:00+04:00" data-updated="true" itemprop="datePublished">Feb 20<span>th</span>, 2014</time></div>
        <div class="tags">


	<a class='category' href='/blog/categories/namshi/'>Namshi</a>, <a class='category' href='/blog/categories/techthursday/'>TechThursday</a>, <a class='category' href='/blog/categories/newsletter/'>newsletter</a>


</div>
        
        <div class="author"><a href="/team/#"></a></div>
    </div>
	<h1 class="title" itemprop="name"></h1>
	<div class="entry-content" itemprop="articleBody"><p>Welcome to <a href="/blog/categories/techthursday/">#TechThursday</a>!</p>

<p>Here are some of the Tech highlights of the week, and some interesting articles we have collected for you!</p>

<!-- more -->


<ul>
<li><p><a href="https://github.com/VerbalExpressions/PHPVerbalExpressions">VerbalExpressions is a PHP library that helps to construct hard regular expressions.</a></p></li>
<li><p><a href="http://jsonstub.com/">Fake the backend while you develop the frontend</a></p></li>
<li><p><a href="http://www.xdata.me/?p=301">Largest Redis Clusters Ever</a></p></li>
<li><p><a href="https://sourcegraph.com/blog/switching-from-angularjs-to-server-side-html">5 surprisingly painful things about client-side JS</a></p></li>
<li><p><a href="http://blog.nodejs.org/2014/01/15/the-next-phase-of-node-js/index.html">The Next Phase of Node.js</a></p></li>
<li><p><a href="http://www.youtube.com/watch?v=aQipuiTcn3U">Protractor talks at ngConf</a></p></li>
<li><p><a href="http://www.sitepoint.com/keeping-php-code-well-documented/">Keeping Your PHP Code Well Documented</a></p></li>
<li><p><a href="http://www.youtube.com/watch?v=3IqtmUscE_U">Zones.js talk at ngConf</a></p></li>
<li><p><a href="http://www.sitepoint.com/hhvm-hack-part-1/">HHVM and Hack – Can We Expect Them to Replace PHP?</a></p></li>
<li><p><a href="https://medium.com/user-experience-researche/e6a1e37028b4">A Guerilla Usability Test on Dropbox Photos How to make a test with real users, in a smart, simple and inexpensive way.</a></p></li>
<li><p><a href="http://www.useronboard.com/how-evernote-onboards-new-users/">How Evernote Onboards New Users A new case-history on the User Onboarding website.</a></p></li>
<li><p><a href="https://medium.com/art-of-product-design/5f8cd0d4560e">From inception to Apple store in just one year An amazing story of a successful product.</a></p></li>
<li><p><a href="https://hacks.mozilla.org/2014/02/localforage-offline-storage-improved">localForage: Offline Storage, Improved</a></p></li>
<li><p><a href="https://ochronus.com/git-tips-from-the-trenches/">Git tips from the trenches</a></p></li>
</ul>

</div></article>


    <article class="post">    <div class="meta">
        <div class="date">








  


<time datetime="2014-02-13T18:14:00+04:00" data-updated="true" itemprop="datePublished">Feb 13<span>th</span>, 2014</time></div>
        <div class="tags">


	<a class='category' href='/blog/categories/namshi/'>Namshi</a>, <a class='category' href='/blog/categories/techthursday/'>TechThursday</a>, <a class='category' href='/blog/categories/newsletter/'>newsletter</a>


</div>
        
        <div class="author"><a href="/team/#"></a></div>
    </div>
	<h1 class="title" itemprop="name"></h1>
	<div class="entry-content" itemprop="articleBody"><p>It&rsquo;s <a href="/blog/categories/techthursday/">#TechThursday</a> again!</p>

<br/>


<!-- more -->


<ul>
<li><a href="https://github.com/HenrikJoreteg/fixpack">Fixpack: A package.json file scrubber for the truly insane.</a></li>
<li><a href="http://ionicframework.com/blog/angularjs-will-be-huge/">Angularjs will be huge!</a></li>
<li><a href="http://octoverse.github.com/">Github Octoverse: 2013 highlights</a></li>
<li><a href="https://github.com/jimhigson/oboe.js">A fresh approach to JSON loading that speeds up web applications by providing the parsed objects before the response completes</a></li>
<li><a href="https://github.com/zeke/ghwd">Open the github URL that matches your shell&rsquo;s current branch and working directory</a></li>
<li><a href="http://editorconfig.org/">Coding standard: editorconfig.org</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/A_re-introduction_to_JavaScript">A re-introduction to Javascript</a></li>
<li><a href="http://koajs.com/">Next generation web framework for node.js</a></li>
<li><a href="http://www.sitepoint.com/phpstorm-top-productivity-hacks-shortcuts/">PhpStorm: top productivity hacks and shortcuts</a></li>
<li><a href="http://blog.malcovery.com/blog/10-cybersecurity-predictions-for-2014">10 cybersecurity predictions for 2014</a></li>
<li><a href="http://gigaom.com/2014/02/11/record-breaking-ddos-attack-struck-on-monday-according-to-reports/">Record-breaking DDoS attack struck on Monday, according to reports</a></li>
<li><a href="http://vuejs.org/">Vuejs: MVVM Made Simple</a></li>
</ul>

</div></article>


    <article class="post">    <div class="meta">
        <div class="date">








  


<time datetime="2014-02-07T22:30:00+04:00" data-updated="true" itemprop="datePublished">Feb 7<span>th</span>, 2014</time></div>
        <div class="tags">


	<a class='category' href='/blog/categories/namshi/'>Namshi</a>, <a class='category' href='/blog/categories/techthursday/'>TechThursday</a>, <a class='category' href='/blog/categories/newsletter/'>newsletter</a>, <a class='category' href='/blog/categories/php/'>php</a>, <a class='category' href='/blog/categories/symfony2/'>symfony2</a>


</div>
        
        <div class="author"><a href="/team/#"></a></div>
    </div>
	<h1 class="title" itemprop="name"></h1>
	<div class="entry-content" itemprop="articleBody"><p>It&rsquo;s <a href="/blog/categories/techthursday/">#TechThursday</a> again! Oh, actually it&rsquo;s friday but&hellip;whatever! :)</p>

<br/>


<br/>


<!-- more -->


<ul>
<li><a href="http://chadfowler.com/blog/2014/01/26/the-magic-of-strace/">Strace</a></li>
<li><a href="https://github.com/HenrikJoreteg/fixpack">Fix your package.json!</a></li>
<li><a href="http://www.sitepoint.com/guzzle-php-http-client/">Guzzle, an HTTP client for PHP</a></li>
<li><a href="https://dutchweballiance.nl/techblog/the-definitive-remote-debug-and-unittest-with-phpstorm-guide-part-6/">Remote debugging and testing with PHPStorm</a></li>
<li><a href="http://blog.gopivotal.com/case-studies-2/continuous-integration-scaling-to-74000-builds-per-day-with-travis-ci-rabbitmq">Scaling 74k builds a day</a></li>
<li><a href="https://37signals.com/">Goodbye 37signals, welcome Basecamp!</a></li>
<li><a href="http://welcometothebundle.com/symfony2-rest-api-the-best-2013-way/">REST APIs with Symfony2</a></li>
</ul>

</div></article>


    <article class="post">    <div class="meta">
        <div class="date">








  


<time datetime="2014-01-30T16:06:00+04:00" data-updated="true" itemprop="datePublished">Jan 30<span>th</span>, 2014</time></div>
        <div class="tags">


	<a class='category' href='/blog/categories/namshi/'>Namshi</a>, <a class='category' href='/blog/categories/techthursday/'>TechThursday</a>, <a class='category' href='/blog/categories/newsletter/'>newsletter</a>


</div>
        
        <div class="author"><a href="/team/#"></a></div>
    </div>
	<h1 class="title" itemprop="name"></h1>
	<div class="entry-content" itemprop="articleBody"><p>It&rsquo;s <a href="/blog/categories/techthursday/">#TechThursday</a> again!</p>

<p>Here at <a href="https://www.namshi.com">namshi</a> we are very keen on
sharing what we find around the &lsquo;net, so we thought of making
our internal newsletter public.</p>

<!-- more -->


<p>Here you go:</p>

<ul>
<li><p><a href="http://blog.fogcreek.com/we-spent-a-week-making-trello-boards-load-extremely-fast-heres-how-we-did-it/">One week to make Trello extremely fast</a></p></li>
<li><p><a href="http://jwage.com/post/73741567918/doctrine-is-not-just-an-orm-for-relational-databases">Doctrine is not just an ORM for RDBMS</a></p></li>
<li><p><a href="http://www.designyourway.net/blog/inspiration/a-collection-of-amazing-html5-demos-and-experiments/">Collection of HTML5 demos and experiments</a></p></li>
<li><p><a href="https://github.com/paularmstrong/swig/">swig: twig in javascript</a></p></li>
<li><p><a href="http://www.githubarchive.org/">The github archive</a></p></li>
<li><p><a href="http://ionicframework.com/">AngularJS for the mobile: the ionic framework</a></p></li>
<li><p><a href="http://www.mediacurrent.com/blog/getting-git">Getting Git</a></p></li>
<li><p><a href="http://pivotal.github.io/jasmine/">The Jasmine testing framework</a></p></li>
<li><p><a href="http://tech.zalando.com/platform/">How is the Zalando platform structured?</a></p></li>
<li><p><a href="https://medium.com/on-product-management/c664ba7e5138">On product management</a></p></li>
<li><p><a href="http://dotfiles.github.io/">dotfiles</a></p></li>
<li><p><a href="https://medium.com/p/24eb09e026dd">How I lost my $50k twitter username</a></p></li>
<li><p><a href="http://www.ebaytechblog.com/2014/01/13/my-first-year-as-a-presentation-engineer-at-ebay/">NodeJS at eBay</a></p></li>
<li><p><a href="http://blog.8thlight.com/uncle-bob/2014/01/27/TheChickenOrTheRoad.html">The domain discontinuity</a></p></li>
<li><p><a href="http://www.workingsoftware.com.au/page/Kill_your_index.php">Kill your index.php</a></p></li>
<li><p><a href="https://github.com/sitespeedio/sitespeed.io/blob/master/README.md">sitespeed.io</a></p></li>
</ul>

</div></article>


    <article class="post">    <div class="meta">
        <div class="date">








  


<time datetime="2014-01-23T17:31:00+04:00" data-updated="true" itemprop="datePublished">Jan 23<span>rd</span>, 2014</time></div>
        <div class="tags">


	<a class='category' href='/blog/categories/javascript/'>javascript</a>, <a class='category' href='/blog/categories/newsletter/'>newsletter</a>, <a class='category' href='/blog/categories/nodejs/'>nodejs</a>, <a class='category' href='/blog/categories/php/'>php</a>, <a class='category' href='/blog/categories/rabbitmq/'>rabbitmq</a>, <a class='category' href='/blog/categories/redis/'>redis</a>, <a class='category' href='/blog/categories/symfony/'>symfony,</a>


</div>
        
        <div class="author"><a href="/team/#"></a></div>
    </div>
	<h1 class="title" itemprop="name"></h1>
	<div class="entry-content" itemprop="articleBody"><p>Hello, this is <a href="/blog/categories/techthursday/">#TechThursday</a> at <a href="http://namshi.com">#namshi</a>!</p>

<br/>


<br/>


<!-- more -->


<p><a href="http://www.jagregory.com/writings/converting-and-preserving-michael-abrash-graphics-programming-black-book/">Converting and Preserving Michael Abrash&rsquo;s Graphics Programming Black Book</a></p>

<p><a href="http://www.socialpoint.es/blog/using-redis-to-build-your-game-leaderboard/">Using redis to build your game leaderboard</a></p>

<p><a href="http://lab.hakim.se/meny/">A three dimensional and space efficient menu</a></p>

<p><a href="http://graspjs.com/">Search, replace, and refactor your JavaScript code based on its structure rather than its text</a></p>

<p><a href="https://github.com/rossriley/php-scalar-objects/blob/master/README.md">PHP Scalar Object Handlers</a></p>

<p><a href="http://php-and-symfony.matthiasnoback.nl/2013/01/dependency-injection-smells/">Dependency Injection smells</a></p>

<p><a href="http://www.rabbitmq.com/blog/2012/04/25/rabbitmq-performance-measurements-part-2/">Rabbitmq performance measurements</a></p>

<p><a href="https://github.com/domnikl/DesignPatternsPHP">Sample code for several design patterns in PHP</a></p>

<p><a href="http://symfony.com/blog/help-symfony-reach-3-billion-people">Help Symfony reach 3 billion people</a></p>

<p><a href="http://blog.nodejs.org/2014/01/15/the-next-phase-of-node-js/index.html?utm_source=hackernewsletter&amp;utm_medium=email">The Next phase of Node.js</a></p>
</div></article>


    <article class="post">    <div class="meta">
        <div class="date">








  


<time datetime="2013-12-10T13:32:00+04:00" data-updated="true" itemprop="datePublished">Dec 10<span>th</span>, 2013</time></div>
        <div class="tags">


	<a class='category' href='/blog/categories/antivirus/'>AntiVirus</a>, <a class='category' href='/blog/categories/system/'>System</a>, <a class='category' href='/blog/categories/tips/'>Tips</a>, <a class='category' href='/blog/categories/virus/'>Virus</a>


</div>
        
        <div class="author"><a href="/team/#"></a></div>
    </div>
	<h1 class="title" itemprop="name"></h1>
	<div class="entry-content" itemprop="articleBody"><ul>
<li>Make sure you have an anti-virus program installed on your computer. If an anti-virus is installed, also sure its updated regularly as well.</li>
<li>Don&rsquo;t open email attachments from an unknown, suspicious or untrustworthy source. Also, be careful of email attachments you are not expecting, it might be that the sender&rsquo;s email has been compromised.</li>
<li>Delete junk emails except you are sure they not junks. Don&rsquo;t forward or reply to any to them. These types of email are
considered Spam because the authenticity of the email is not guaranteed.</li>
</ul>


<!-- more -->


<ul>
<li>Be careful when downloading files from the Internet. Be sure that the source is a legitimate and a reputable one.</li>
<li>Please stay away from torrent sites. Some of the popular ones include Limewire, BitTorrent, Frostwire and Pirate Bay are heavily laden with viruses, malware and spyware. Downloading from these websites is one of the easiest ways to become infected. It’s in your best interest to avoid these websites completely.</li>
<li>Be careful when searching on the Internet, the links that come up from your search engine may contain a virus. Never go to sites that seem suspicious.</li>
<li>Due to the popularity of the social networking websites such as MySpace, Facebook, and Twitter, virus makers target them more than any other website. Unknown Ads especially the ones that advertise free stuffs are considered high risk. Avoid clicking these links.</li>
<li>If you happen to see a pop-up message that you have been infected and to buy their software to protect yourself, do not fall for it! If you click on any part of those messages, a program will be installed which could be a virus. Immediately close the browser and don&rsquo;t open the browser page when opening the browser again.</li>
<li>If you happen see any suspicious pop-ups appear on your screen, don&rsquo;t click them. If you do, it is very likely you will infect your computer. Immediately close the browser and don&rsquo;t open the browser page when opening the browser again.</li>
<li>If you are in doubt about any potential virus related situation you find yourself in, please do not hesitate to the <a href="mailto:it@namshi.com">IT team</a> and we will answer any question you may have.</li>
</ul>


<h2>References:</h2>

<ul>
<li><a href="http://windows.microsoft.com/en-us/windows7/tips-for-protecting-your-computer-from-viruses">http://windows.microsoft.com/en-us/windows7/tips-for-protecting-your-computer-from-viruses</a></li>
<li><a href="http://www.csrinc.net/virusprevention/VirusDetectionandPreventionTips.pdf">http://www.csrinc.net/virusprevention/VirusDetectionandPreventionTips.pdf</a></li>
</ul>

</div></article>


    <article class="post">    <div class="meta">
        <div class="date">








  


<time datetime="2013-09-23T15:44:00+04:00" data-updated="true" itemprop="datePublished">Sep 23<span>rd</span>, 2013</time></div>
        <div class="tags">


	<a class='category' href='/blog/categories/automated-testing/'>Automated Testing</a>, <a class='category' href='/blog/categories/phpunit/'>Phpunit</a>


</div>
        
        <div class="author"><a href="/team/#"></a></div>
    </div>
	<h1 class="title" itemprop="name"></h1>
	<div class="entry-content" itemprop="articleBody"><p>As Namshi developers we spend our time doing tickets and coding tasks every day to enhance the
website. However these changes are not stable all the time, sometimes some of these new changes
end up breaking other working parts of our applications without a prior alert until after we deploy it on
our website. As a result we end up having some bugs and hot fixes either immediately after testing the
new deployment or later on when people spot the bugs. Therefore Intensive QA is important because the
manual test only is not enough, even though if we were careful sometimes we’ll probably forget to test
all the affected parts by our changes. And after any deployment we need to test everything and if something
was broken we would need to fix is ASAP.</p>

<!-- more -->


<p>We were working with <a href="http://framework.zend.com/">Zend Framework</a> which is considered as a good
framework for MVC projects, but we decided to move to <a href="http://symfony.com/">Symfony2</a> as it is more
user-friendly to enhance the structure of our projects and make it more organized, service based applications
and most importantly to build automated unit tests. Automated tests are mainly important for testing our tickets
and changes before/after they are deployed for quality assurance purposes. Moreover, such tests need to be
integrated at early stages because it’s very hard to add them after the development of your application.
Therefore, such tests need to be implemented in parallel with your application to make sure you cover
all units and aspects of your application.</p>

<h4>Testing our project using phpunit</h4>

<p>Quality assurance is one of the most important aspects in application development, there are several tests
that can be used for web applications like:</p>

<ul>
<li><h5>Unit Test</h5></li>
</ul>


<p>Unit Tests are usually conducted to test classes and functions within the application itself. It tests how
some functions interact with others and if the desired output and behavior are obtained.</p>

<ul>
<li><h5>Functional Test</h5></li>
</ul>


<p>Functional test is mainly used test the integration between our application [Namshi] and other services
and layers.</p>

<p>This test is useful for checking how our application functions and interacts with internal and external services.</p>

<h4>Why do we waste time on implementing automated tests</h4>

<p>If we develop our applications without writing automated tests to save time, we will end up spending more
time in fixing issues after each deployment. therefore adding automated tests will save our time,
ensure the quality of our application and help us gaining the trust of our customers.</p>

<h4>How to implement automated test</h4>

<p>With the help of symfony2 implementing automated tests is much easier and feasible. First of all you will
need to install <a href="http://phpunit.de/manual/current/en/index.html">phpunit</a> and then develop the test and
 implement it in your application.</p>

<h4>Would automated test modify the application&rsquo;s data</h4>

<p>Automated tests should not affect/modify any data in our application. Therefore we create new databases
for the testing environment, then we use data fixtures
<a href="http://symfony.com/doc/current/bundles/DoctrineFixturesBundle/index.html">DoctrineFixturesBundle</a>
to insert dummy data into the testing databases, and finally we add/delete required data before/after each test.</p>

<h4>Testing <a href="http://namshi.com/">Namshi</a></h4>

<p>We are implementing our tests for our application and all the services that interact with it.
 Our purpose is to cover all aspects of <a href="http://namshi.com/">Namshi</a> with automated test (functional test or unit test)
 to ensure the quality of our application and optimize it.</p>

<p>for now we implemented around 200 test cases
<img class="center" src="/images/posts/test-result-success.png" title="test result" ></p>

<p>These tests won&rsquo;t pass if we have any bugs of the application
<img class="center" src="/images/posts/test-result-failure.png" title="test result" ></p>

<h4>How we assert test results?</h4>

<p>we can assert test results in different ways depending on the response that we are expecting:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$this-&gt;assertEquals(400, $response-&gt;getStatusCode());
</span><span class='line'>$this-&gt;assertContains("Expected text", $crawler-&gt;filter('*')-&gt;text());</span></code></pre></td></tr></table></div></figure>


<p>we can also use <a href="http://php.net/manual/en/class.domxpath.php">DOMXPath</a> to filter html result</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$xpath  = new DOMXPath($doc);
</span><span class='line'>$this-&gt;assertContains('expected value', $xpath-&gt;query("//td[@class='html tag class']")-&gt;item(0)-&gt;nodeValue);</span></code></pre></td></tr></table></div></figure>


<p>or we can expect exceptions</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/**
</span><span class='line'> * @expectedException \Namshi\EntityBundle\Exception\InvalidPaymentMethod
</span><span class='line'> */
</span><span class='line'> public function testServiceWithInvalidPaymentMethod()
</span><span class='line'> {
</span><span class='line'>    $data   = initial data
</span><span class='line'>    $result = $service-&gt;execute($data);
</span><span class='line'> }</span></code></pre></td></tr></table></div></figure>

</div></article>

<nav id="pagenavi">
    
    
        <a href="/blog/page/2/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
			</div>
			<footer id="footer" class="inner">Copyright &copy; 2014

    Namshi

<br>
Powered by Octopress.

Design credit: <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a></footer>
			<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'namshitechblog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





		</div>
	</div>
</body>
</html>
